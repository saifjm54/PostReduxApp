{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nexports.__esModule = true;\nexports.defineRelationalProperties = void 0;\nvar debug_1 = require(\"debug\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar outvariant_1 = require(\"outvariant\");\nvar glossary_1 = require(\"../glossary\");\nvar log = debug_1.debug('defineRelationalProperties');\nfunction defineRelationalProperties(entity, initialValues, relations, dictionary, db) {\n  var e_1, _a;\n  log('defining relational properties...', {\n    entity: entity,\n    initialValues: initialValues,\n    relations: relations\n  });\n  try {\n    for (var relations_1 = __values(relations), relations_1_1 = relations_1.next(); !relations_1_1.done; relations_1_1 = relations_1.next()) {\n      var _b = relations_1_1.value,\n        propertyPath = _b.propertyPath,\n        relation = _b.relation;\n      outvariant_1.invariant(dictionary[relation.target.modelName], 'Failed to define a \"%s\" relational property to \"%s\" on \"%s\": cannot find a model by the name \"%s\".', relation.kind, propertyPath.join('.'), entity[glossary_1.ENTITY_TYPE], relation.target.modelName);\n      var references = get_1[\"default\"](initialValues, propertyPath);\n      outvariant_1.invariant(references !== null || relation.attributes.nullable, 'Failed to define a \"%s\" relationship to \"%s\" at \"%s.%s\" (%s: \"%s\"): cannot set a non-nullable relationship to null.', relation.kind, relation.target.modelName, entity[glossary_1.ENTITY_TYPE], propertyPath.join('.'), entity[glossary_1.PRIMARY_KEY], entity[entity[glossary_1.PRIMARY_KEY]]);\n      // invariant(\n      //   references !== null || relation.attributes.nullable,\n      //   'Failed to define a \"%s\" relational property to \"%s\" on \"%s\": a non-nullable relation cannot be instantiated with null. Use the \"nullable\" function when defining this relation to support nullable value.',\n      //   relation.kind,\n      //   propertyPath.join('.'),\n      //   entity[ENTITY_TYPE],\n      // )\n      log(\"setting relational property \\\"\" + entity.__type + \".\" + propertyPath.join('.') + \"\\\" with references: %j\", relation, references);\n      relation.apply(entity, propertyPath, dictionary, db);\n      if (references) {\n        relation.resolveWith(entity, references);\n      } else if (relation.attributes.nullable) {\n        relation.resolveWith(entity, null);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (relations_1_1 && !relations_1_1.done && (_a = relations_1[\"return\"])) _a.call(relations_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n}\nexports.defineRelationalProperties = defineRelationalProperties;","map":{"version":3,"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__importDefault","mod","__esModule","exports","defineRelationalProperties","debug_1","require","get_1","outvariant_1","glossary_1","log","debug","entity","initialValues","relations","dictionary","db","e_1","_a","relations_1","relations_1_1","_b","propertyPath","relation","invariant","target","modelName","kind","join","ENTITY_TYPE","references","attributes","nullable","PRIMARY_KEY","__type","apply","resolveWith","e_1_1","error"],"sources":["/home/saif/Documents/Proxym/redux-essentials-example-app/node_modules/@mswjs/data/lib/model/defineRelationalProperties.js"],"sourcesContent":["\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.defineRelationalProperties = void 0;\nvar debug_1 = require(\"debug\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar outvariant_1 = require(\"outvariant\");\nvar glossary_1 = require(\"../glossary\");\nvar log = debug_1.debug('defineRelationalProperties');\nfunction defineRelationalProperties(entity, initialValues, relations, dictionary, db) {\n    var e_1, _a;\n    log('defining relational properties...', { entity: entity, initialValues: initialValues, relations: relations });\n    try {\n        for (var relations_1 = __values(relations), relations_1_1 = relations_1.next(); !relations_1_1.done; relations_1_1 = relations_1.next()) {\n            var _b = relations_1_1.value, propertyPath = _b.propertyPath, relation = _b.relation;\n            outvariant_1.invariant(dictionary[relation.target.modelName], 'Failed to define a \"%s\" relational property to \"%s\" on \"%s\": cannot find a model by the name \"%s\".', relation.kind, propertyPath.join('.'), entity[glossary_1.ENTITY_TYPE], relation.target.modelName);\n            var references = get_1[\"default\"](initialValues, propertyPath);\n            outvariant_1.invariant(references !== null || relation.attributes.nullable, 'Failed to define a \"%s\" relationship to \"%s\" at \"%s.%s\" (%s: \"%s\"): cannot set a non-nullable relationship to null.', relation.kind, relation.target.modelName, entity[glossary_1.ENTITY_TYPE], propertyPath.join('.'), entity[glossary_1.PRIMARY_KEY], entity[entity[glossary_1.PRIMARY_KEY]]);\n            // invariant(\n            //   references !== null || relation.attributes.nullable,\n            //   'Failed to define a \"%s\" relational property to \"%s\" on \"%s\": a non-nullable relation cannot be instantiated with null. Use the \"nullable\" function when defining this relation to support nullable value.',\n            //   relation.kind,\n            //   propertyPath.join('.'),\n            //   entity[ENTITY_TYPE],\n            // )\n            log(\"setting relational property \\\"\" + entity.__type + \".\" + propertyPath.join('.') + \"\\\" with references: %j\", relation, references);\n            relation.apply(entity, propertyPath, dictionary, db);\n            if (references) {\n                relation.resolveWith(entity, references);\n            }\n            else if (relation.attributes.nullable) {\n                relation.resolveWith(entity, null);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (relations_1_1 && !relations_1_1.done && (_a = relations_1[\"return\"])) _a.call(relations_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n}\nexports.defineRelationalProperties = defineRelationalProperties;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}