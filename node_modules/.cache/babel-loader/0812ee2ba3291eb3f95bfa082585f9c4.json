{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nexports.__esModule = true;\nexports.createModel = void 0;\nvar debug_1 = require(\"debug\");\nvar outvariant_1 = require(\"outvariant\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar set_1 = __importDefault(require(\"lodash/set\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar glossary_1 = require(\"../glossary\");\nvar defineRelationalProperties_1 = require(\"./defineRelationalProperties\");\nvar primaryKey_1 = require(\"../primaryKey\");\nvar Relation_1 = require(\"../relations/Relation\");\nvar nullable_1 = require(\"../nullable\");\nvar isModelValueType_1 = require(\"../utils/isModelValueType\");\nvar log = debug_1.debug('createModel');\nfunction createModel(modelName, definition, dictionary, parsedModel, initialValues, db) {\n  var _a;\n  var primaryKey = parsedModel.primaryKey,\n    properties = parsedModel.properties,\n    relations = parsedModel.relations;\n  log(\"creating a \\\"\" + modelName + \"\\\" entity (primary key: \\\"\" + primaryKey + \"\\\")\", definition, parsedModel, relations, initialValues);\n  var internalProperties = (_a = {}, _a[glossary_1.ENTITY_TYPE] = modelName, _a[glossary_1.PRIMARY_KEY] = primaryKey, _a);\n  var publicProperties = properties.reduce(function (properties, propertyName) {\n    var initialValue = get_1[\"default\"](initialValues, propertyName);\n    var propertyDefinition = get_1[\"default\"](definition, propertyName);\n    // Ignore relational properties at this stage.\n    if (propertyDefinition instanceof Relation_1.Relation) {\n      return properties;\n    }\n    if (propertyDefinition instanceof primaryKey_1.PrimaryKey) {\n      set_1[\"default\"](properties, propertyName, initialValue || propertyDefinition.getPrimaryKeyValue());\n      return properties;\n    }\n    if (propertyDefinition instanceof nullable_1.NullableProperty) {\n      var value = initialValue === null || isModelValueType_1.isModelValueType(initialValue) ? initialValue : propertyDefinition.getValue();\n      set_1[\"default\"](properties, propertyName, value);\n      return properties;\n    }\n    outvariant_1.invariant(initialValue !== null, 'Failed to create a \"%s\" entity: a non-nullable property \"%s\" cannot be instantiated with null. Use the \"nullable\" function when defining this property to support nullable value.', modelName, propertyName.join('.'));\n    if (isModelValueType_1.isModelValueType(initialValue)) {\n      log('\"%s\" has a plain initial value:', modelName + \".\" + propertyName, initialValue);\n      set_1[\"default\"](properties, propertyName, initialValue);\n      return properties;\n    }\n    if (isFunction_1[\"default\"](propertyDefinition)) {\n      set_1[\"default\"](properties, propertyName, propertyDefinition());\n      return properties;\n    }\n    return properties;\n  }, {});\n  var entity = Object.assign({}, publicProperties, internalProperties);\n  defineRelationalProperties_1.defineRelationalProperties(entity, initialValues, relations, dictionary, db);\n  log('created \"%s\" entity:', modelName, entity);\n  return entity;\n}\nexports.createModel = createModel;","map":{"version":3,"names":["__importDefault","mod","__esModule","exports","createModel","debug_1","require","outvariant_1","get_1","set_1","isFunction_1","glossary_1","defineRelationalProperties_1","primaryKey_1","Relation_1","nullable_1","isModelValueType_1","log","debug","modelName","definition","dictionary","parsedModel","initialValues","db","_a","primaryKey","properties","relations","internalProperties","ENTITY_TYPE","PRIMARY_KEY","publicProperties","reduce","propertyName","initialValue","propertyDefinition","Relation","PrimaryKey","getPrimaryKeyValue","NullableProperty","value","isModelValueType","getValue","invariant","join","entity","Object","assign","defineRelationalProperties"],"sources":["/home/saif/Documents/Proxym/redux-essentials-example-app/node_modules/@mswjs/data/lib/model/createModel.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.createModel = void 0;\nvar debug_1 = require(\"debug\");\nvar outvariant_1 = require(\"outvariant\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar set_1 = __importDefault(require(\"lodash/set\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar glossary_1 = require(\"../glossary\");\nvar defineRelationalProperties_1 = require(\"./defineRelationalProperties\");\nvar primaryKey_1 = require(\"../primaryKey\");\nvar Relation_1 = require(\"../relations/Relation\");\nvar nullable_1 = require(\"../nullable\");\nvar isModelValueType_1 = require(\"../utils/isModelValueType\");\nvar log = debug_1.debug('createModel');\nfunction createModel(modelName, definition, dictionary, parsedModel, initialValues, db) {\n    var _a;\n    var primaryKey = parsedModel.primaryKey, properties = parsedModel.properties, relations = parsedModel.relations;\n    log(\"creating a \\\"\" + modelName + \"\\\" entity (primary key: \\\"\" + primaryKey + \"\\\")\", definition, parsedModel, relations, initialValues);\n    var internalProperties = (_a = {},\n        _a[glossary_1.ENTITY_TYPE] = modelName,\n        _a[glossary_1.PRIMARY_KEY] = primaryKey,\n        _a);\n    var publicProperties = properties.reduce(function (properties, propertyName) {\n        var initialValue = get_1[\"default\"](initialValues, propertyName);\n        var propertyDefinition = get_1[\"default\"](definition, propertyName);\n        // Ignore relational properties at this stage.\n        if (propertyDefinition instanceof Relation_1.Relation) {\n            return properties;\n        }\n        if (propertyDefinition instanceof primaryKey_1.PrimaryKey) {\n            set_1[\"default\"](properties, propertyName, initialValue || propertyDefinition.getPrimaryKeyValue());\n            return properties;\n        }\n        if (propertyDefinition instanceof nullable_1.NullableProperty) {\n            var value = initialValue === null || isModelValueType_1.isModelValueType(initialValue)\n                ? initialValue\n                : propertyDefinition.getValue();\n            set_1[\"default\"](properties, propertyName, value);\n            return properties;\n        }\n        outvariant_1.invariant(initialValue !== null, 'Failed to create a \"%s\" entity: a non-nullable property \"%s\" cannot be instantiated with null. Use the \"nullable\" function when defining this property to support nullable value.', modelName, propertyName.join('.'));\n        if (isModelValueType_1.isModelValueType(initialValue)) {\n            log('\"%s\" has a plain initial value:', modelName + \".\" + propertyName, initialValue);\n            set_1[\"default\"](properties, propertyName, initialValue);\n            return properties;\n        }\n        if (isFunction_1[\"default\"](propertyDefinition)) {\n            set_1[\"default\"](properties, propertyName, propertyDefinition());\n            return properties;\n        }\n        return properties;\n    }, {});\n    var entity = Object.assign({}, publicProperties, internalProperties);\n    defineRelationalProperties_1.defineRelationalProperties(entity, initialValues, relations, dictionary, db);\n    log('created \"%s\" entity:', modelName, entity);\n    return entity;\n}\nexports.createModel = createModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}