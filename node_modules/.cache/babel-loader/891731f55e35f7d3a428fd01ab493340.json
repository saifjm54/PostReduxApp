{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nexports.__esModule = true;\nexports.updateEntity = void 0;\nvar debug_1 = require(\"debug\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar set_1 = __importDefault(require(\"lodash/set\"));\nvar outvariant_1 = require(\"outvariant\");\nvar Relation_1 = require(\"../relations/Relation\");\nvar glossary_1 = require(\"../glossary\");\nvar isObject_1 = require(\"../utils/isObject\");\nvar inheritInternalProperties_1 = require(\"../utils/inheritInternalProperties\");\nvar nullable_1 = require(\"../nullable\");\nvar spread_1 = require(\"../utils/spread\");\nvar log = debug_1.debug('updateEntity');\n/**\n * Update an entity with the given next data.\n */\nfunction updateEntity(entity, data, definition) {\n  log('updating entity:\\n%j\\nwith data:\\n%j', entity, data);\n  log('model definition:', definition);\n  var nextEntity = spread_1.spread(entity);\n  inheritInternalProperties_1.inheritInternalProperties(nextEntity, entity);\n  var updateRecursively = function (data, parentPath) {\n    var e_1, _a;\n    if (parentPath === void 0) {\n      parentPath = [];\n    }\n    log('updating path \"%s\" to:', parentPath, data);\n    var _loop_1 = function (propertyName, value) {\n      var propertyPath = parentPath.concat(propertyName);\n      var prevValue = get_1[\"default\"](nextEntity, propertyPath);\n      log('previous value for \"%s\":', propertyPath, prevValue);\n      var nextValue = typeof value === 'function' ? value(prevValue, entity) : value;\n      log('next value for \"%s\":', propertyPath, nextValue);\n      var propertyDefinition = get_1[\"default\"](definition, propertyPath);\n      log('property definition for \"%s\":', propertyPath, propertyDefinition);\n      if (propertyDefinition == null) {\n        log('skipping an unknown property \"%s\" on \"%s\"...', propertyName, entity[glossary_1.ENTITY_TYPE]);\n        return \"continue\";\n      }\n      if (propertyDefinition instanceof Relation_1.Relation) {\n        log('property \"%s\" is a \"%s\" relationship to \"%s\"', propertyPath, propertyDefinition.kind, propertyDefinition.target.modelName);\n        var location_1 = nextEntity[glossary_1.ENTITY_TYPE] + \".\" + propertyPath.join('.');\n        if (nextValue == null) {\n          // Forbid updating a non-nullable relationship to null.\n          outvariant_1.invariant(propertyDefinition.attributes.nullable, 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): cannot update a non-nullable relationship to null.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]]);\n          log('re-defining the \"%s\" relationship on \"%s\" to: null', propertyName, nextEntity[glossary_1.ENTITY_TYPE]);\n          propertyDefinition.resolveWith(nextEntity, null);\n          return \"continue\";\n        }\n        if (propertyDefinition.kind === Relation_1.RelationKind.ManyOf) {\n          // Forbid updating a \"MANY_OF\" relation to a non-array value.\n          outvariant_1.invariant(Array.isArray(nextValue), 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value to be an array of entities but got %j.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], nextValue);\n          nextValue.forEach(function (ref, index) {\n            // Forbid providing a compatible plain object in any array members.\n            outvariant_1.invariant(ref[glossary_1.ENTITY_TYPE], 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value at index %d to be an entity but got %j.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], index, ref);\n            // Forbid referencing a different model in any array members.\n            outvariant_1.invariant(ref[glossary_1.ENTITY_TYPE] === propertyDefinition.target.modelName, 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value at index %d to reference a \"%s\" but got \"%s\".', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], index, propertyDefinition.target.modelName, ref[glossary_1.ENTITY_TYPE]);\n          });\n          propertyDefinition.resolveWith(nextEntity, nextValue);\n          return \"continue\";\n        }\n        // Forbid updating a relationship with a compatible plain object.\n        outvariant_1.invariant(nextValue[glossary_1.ENTITY_TYPE], 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value to be an entity but got %j.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], nextValue);\n        // Forbid updating a relationship to an entity of a different model.\n        outvariant_1.invariant(nextValue[glossary_1.ENTITY_TYPE] == propertyDefinition.target.modelName, 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value to reference a \"%s\" but got \"%s\" (%s: \"%s\").', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], propertyDefinition.target.modelName, nextValue[glossary_1.ENTITY_TYPE], nextValue[glossary_1.PRIMARY_KEY], nextValue[nextValue[glossary_1.PRIMARY_KEY]]);\n        // Re-define the relationship only if its next value references a different entity\n        // than before. That means a new compatible entity was created as the next value.\n        if ((prevValue === null || prevValue === void 0 ? void 0 : prevValue[prevValue === null || prevValue === void 0 ? void 0 : prevValue[glossary_1.PRIMARY_KEY]]) !== nextValue[nextValue[glossary_1.PRIMARY_KEY]]) {\n          log('next referenced \"%s\" (%s: \"%s\") differs from the previous (%s: \"%s\"), re-defining the relationship...', propertyDefinition.target.modelName, nextValue[glossary_1.PRIMARY_KEY]);\n          propertyDefinition.resolveWith(nextEntity, nextValue);\n        }\n        return \"continue\";\n      }\n      // Support updating nested objects.\n      if (isObject_1.isObject(nextValue)) {\n        log('next value at \"%s\" is an object: %j, recursively updating...', propertyPath, nextValue);\n        updateRecursively(nextValue, propertyPath);\n        return \"continue\";\n      }\n      outvariant_1.invariant(nextValue !== null || propertyDefinition instanceof nullable_1.NullableProperty, 'Failed to update \"%s\" on \"%s\": cannot set a non-nullable property to null.', propertyName, entity[glossary_1.ENTITY_TYPE]);\n      log('updating a plain property \"%s\" to:', propertyPath, nextValue);\n      set_1[\"default\"](nextEntity, propertyPath, nextValue);\n    };\n    try {\n      for (var _b = __values(Object.entries(data)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var _d = __read(_c.value, 2),\n          propertyName = _d[0],\n          value = _d[1];\n        _loop_1(propertyName, value);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  updateRecursively(data);\n  log('successfully updated to:', nextEntity);\n  return nextEntity;\n}\nexports.updateEntity = updateEntity;","map":{"version":3,"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__read","n","r","ar","e","push","error","__importDefault","mod","__esModule","exports","updateEntity","debug_1","require","get_1","set_1","outvariant_1","Relation_1","glossary_1","isObject_1","inheritInternalProperties_1","nullable_1","spread_1","log","debug","entity","data","definition","nextEntity","spread","inheritInternalProperties","updateRecursively","parentPath","e_1","_a","_loop_1","propertyName","propertyPath","concat","prevValue","nextValue","propertyDefinition","ENTITY_TYPE","Relation","kind","target","modelName","location_1","join","invariant","attributes","nullable","PRIMARY_KEY","resolveWith","RelationKind","ManyOf","Array","isArray","forEach","ref","index","isObject","NullableProperty","_b","Object","entries","_c","_d","e_1_1"],"sources":["/home/saif/Documents/Proxym/redux-essentials-example-app/node_modules/@mswjs/data/lib/model/updateEntity.js"],"sourcesContent":["\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.updateEntity = void 0;\nvar debug_1 = require(\"debug\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar set_1 = __importDefault(require(\"lodash/set\"));\nvar outvariant_1 = require(\"outvariant\");\nvar Relation_1 = require(\"../relations/Relation\");\nvar glossary_1 = require(\"../glossary\");\nvar isObject_1 = require(\"../utils/isObject\");\nvar inheritInternalProperties_1 = require(\"../utils/inheritInternalProperties\");\nvar nullable_1 = require(\"../nullable\");\nvar spread_1 = require(\"../utils/spread\");\nvar log = debug_1.debug('updateEntity');\n/**\n * Update an entity with the given next data.\n */\nfunction updateEntity(entity, data, definition) {\n    log('updating entity:\\n%j\\nwith data:\\n%j', entity, data);\n    log('model definition:', definition);\n    var nextEntity = spread_1.spread(entity);\n    inheritInternalProperties_1.inheritInternalProperties(nextEntity, entity);\n    var updateRecursively = function (data, parentPath) {\n        var e_1, _a;\n        if (parentPath === void 0) { parentPath = []; }\n        log('updating path \"%s\" to:', parentPath, data);\n        var _loop_1 = function (propertyName, value) {\n            var propertyPath = parentPath.concat(propertyName);\n            var prevValue = get_1[\"default\"](nextEntity, propertyPath);\n            log('previous value for \"%s\":', propertyPath, prevValue);\n            var nextValue = typeof value === 'function' ? value(prevValue, entity) : value;\n            log('next value for \"%s\":', propertyPath, nextValue);\n            var propertyDefinition = get_1[\"default\"](definition, propertyPath);\n            log('property definition for \"%s\":', propertyPath, propertyDefinition);\n            if (propertyDefinition == null) {\n                log('skipping an unknown property \"%s\" on \"%s\"...', propertyName, entity[glossary_1.ENTITY_TYPE]);\n                return \"continue\";\n            }\n            if (propertyDefinition instanceof Relation_1.Relation) {\n                log('property \"%s\" is a \"%s\" relationship to \"%s\"', propertyPath, propertyDefinition.kind, propertyDefinition.target.modelName);\n                var location_1 = nextEntity[glossary_1.ENTITY_TYPE] + \".\" + propertyPath.join('.');\n                if (nextValue == null) {\n                    // Forbid updating a non-nullable relationship to null.\n                    outvariant_1.invariant(propertyDefinition.attributes.nullable, 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): cannot update a non-nullable relationship to null.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]]);\n                    log('re-defining the \"%s\" relationship on \"%s\" to: null', propertyName, nextEntity[glossary_1.ENTITY_TYPE]);\n                    propertyDefinition.resolveWith(nextEntity, null);\n                    return \"continue\";\n                }\n                if (propertyDefinition.kind === Relation_1.RelationKind.ManyOf) {\n                    // Forbid updating a \"MANY_OF\" relation to a non-array value.\n                    outvariant_1.invariant(Array.isArray(nextValue), 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value to be an array of entities but got %j.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], nextValue);\n                    nextValue.forEach(function (ref, index) {\n                        // Forbid providing a compatible plain object in any array members.\n                        outvariant_1.invariant(ref[glossary_1.ENTITY_TYPE], 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value at index %d to be an entity but got %j.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], index, ref);\n                        // Forbid referencing a different model in any array members.\n                        outvariant_1.invariant(ref[glossary_1.ENTITY_TYPE] === propertyDefinition.target.modelName, 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value at index %d to reference a \"%s\" but got \"%s\".', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], index, propertyDefinition.target.modelName, ref[glossary_1.ENTITY_TYPE]);\n                    });\n                    propertyDefinition.resolveWith(nextEntity, nextValue);\n                    return \"continue\";\n                }\n                // Forbid updating a relationship with a compatible plain object.\n                outvariant_1.invariant(nextValue[glossary_1.ENTITY_TYPE], 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value to be an entity but got %j.', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], nextValue);\n                // Forbid updating a relationship to an entity of a different model.\n                outvariant_1.invariant(nextValue[glossary_1.ENTITY_TYPE] == propertyDefinition.target.modelName, 'Failed to update a \"%s\" relationship to \"%s\" at \"%s\" (%s: \"%s\"): expected the next value to reference a \"%s\" but got \"%s\" (%s: \"%s\").', propertyDefinition.kind, propertyDefinition.target.modelName, location_1, nextEntity[glossary_1.PRIMARY_KEY], nextEntity[nextEntity[glossary_1.PRIMARY_KEY]], propertyDefinition.target.modelName, nextValue[glossary_1.ENTITY_TYPE], nextValue[glossary_1.PRIMARY_KEY], nextValue[nextValue[glossary_1.PRIMARY_KEY]]);\n                // Re-define the relationship only if its next value references a different entity\n                // than before. That means a new compatible entity was created as the next value.\n                if ((prevValue === null || prevValue === void 0 ? void 0 : prevValue[prevValue === null || prevValue === void 0 ? void 0 : prevValue[glossary_1.PRIMARY_KEY]]) !==\n                    nextValue[nextValue[glossary_1.PRIMARY_KEY]]) {\n                    log('next referenced \"%s\" (%s: \"%s\") differs from the previous (%s: \"%s\"), re-defining the relationship...', propertyDefinition.target.modelName, nextValue[glossary_1.PRIMARY_KEY]);\n                    propertyDefinition.resolveWith(nextEntity, nextValue);\n                }\n                return \"continue\";\n            }\n            // Support updating nested objects.\n            if (isObject_1.isObject(nextValue)) {\n                log('next value at \"%s\" is an object: %j, recursively updating...', propertyPath, nextValue);\n                updateRecursively(nextValue, propertyPath);\n                return \"continue\";\n            }\n            outvariant_1.invariant(nextValue !== null || propertyDefinition instanceof nullable_1.NullableProperty, 'Failed to update \"%s\" on \"%s\": cannot set a non-nullable property to null.', propertyName, entity[glossary_1.ENTITY_TYPE]);\n            log('updating a plain property \"%s\" to:', propertyPath, nextValue);\n            set_1[\"default\"](nextEntity, propertyPath, nextValue);\n        };\n        try {\n            for (var _b = __values(Object.entries(data)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), propertyName = _d[0], value = _d[1];\n                _loop_1(propertyName, value);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    updateRecursively(data);\n    log('successfully updated to:', nextEntity);\n    return nextEntity;\n}\nexports.updateEntity = updateEntity;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}